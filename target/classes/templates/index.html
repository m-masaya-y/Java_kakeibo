<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>収支管理</title>
<style>
  body { font-family: sans-serif; display: flex; justify-content: center; padding: 20px; background:#f5f5f5; }
  .container { width:100%; max-width:900px; background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); text-align:center; }
  form { display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-bottom:20px; }
  input, select { padding:10px; border-radius:6px; border:1px solid #ccc; width:180px; }
  button { padding:10px 20px; border:none; border-radius:6px; cursor:pointer; }
  .save-btn { background:#007bff; color:white; }
  .delete-btn { background:#d9534f; color:white; }
  .table-container { overflow-x:auto; margin-top:20px; }
  table { width:100%; border-collapse:collapse; margin-top:10px; }
  th, td { border:1px solid #ddd; padding:10px; text-align:center; }
  th { background:#87cefa; }
  .summary { margin:20px 0; padding:15px; background:#e3f2fd; border-radius:8px; text-align:left; }
  @media(max-width:600px) { input, select { width:100%; } }
</style>
</head>
<body>
<div class="container">
  <h2>収支管理アプリ</h2>

  <button onclick="location.href='https://minahada.com/wordpress/'" style="margin-bottom:20px; background:#444; color:white;">トップに戻る</button>

  <form th:action="@{/save}" method="post">
    <select name="month" required>
      <option value="1">1月</option>
      <option value="2">2月</option>
      <option value="3">3月</option>
      <option value="4">4月</option>
      <option value="5">5月</option>
      <option value="6">6月</option>
      <option value="7">7月</option>
      <option value="8">8月</option>
      <option value="9">9月</option>
      <option value="10">10月</option>
      <option value="11">11月</option>
      <option value="12">12月</option>
    </select>

    <input type="number" name="income" placeholder="収入" value="0" min="0">
    <input type="number" name="expense" placeholder="支出" value="0" min="0">
    <button type="submit" class="save-btn">保存</button>
  </form>

  <div class="summary">
    <h3>月ごとの合計</h3>
    <div th:each="month : ${#lists.sort(dataList, 'month')}">
      <div th:text="${month.month} + '月：収入 ' + month.income + ' 円 / 支出 ' + month.expense + ' 円'"></div>
    </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>月</th>
          <th>収入</th>
          <th>支出</th>
          <th>削除</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="item : ${dataList}">
          <td th:text="${item.month} + '月'"></td>
          <td th:text="${item.income}"></td>
          <td th:text="${item.expense}"></td>
          <td>
            <form th:action="@{/delete}" method="post">
              <input type="hidden" th:name="id" th:value="${item.id}" />
              <button type="submit" class="delete-btn">削除</button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
</body>
</html>
